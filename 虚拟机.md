#### 准备

准备阶段是正式为类变量分配内存并设置类变量初始值的阶段，这些变量所使用的内存都将在方法区中进行分配

+ 进行内存分配的仅包括类变量（被static修饰的变量），而不包括实例变量，实例变量将会在对象实例化时随着对象一起分配在Java堆中
+ 初始值通常情况 下是数据类型的零值；被final修饰，则为该属性所指定的值



~~~
public static int value=123;
~~~

变量value在准备阶段过后的初始值为0而不是123，因为这时候尚未执行任何Java方法，而把value赋值为123的putstatic指令是在程序被编译后，存放于类构造器方法之中，所以把value赋值为123的动作将在初始化阶段才会执行



#### 解析

解析阶段是虚拟机将常量池内的符号引用替换为直接引用的过程

invokedynamic指令的目的用于动态语言支持，它所对应的引用称为“动态调用点限定符”，这里“动态”的含义就是必须等到实际运行到这条指令的时候，解析动作才能进行。相对的，其余可触发解析的指令都是“静态”的，可以在刚刚完成加载阶段，还没有开始执行代码时就进行解析

编译期可知，运行期不变——这类方法的调用称为解析

满足条件的方法有静态方法和私有方法，它们都不可能通过继承或别的方式重写其他版本，因此它们都适合在类加载阶段进行解析



#### 初始化

通过数组定义来引用类，不会触发此类的初始化

数组类本身不通过类加载器创建，它是由Java虚拟机直接创建的。但数组类与类加载器仍然有很密切的关系，因为数组类的元素类型最终是要靠类加载器去创建



在准备阶段，变量已经赋过一次系统要求的初始值，而在初始化阶段，则根据程序员通过程序制定的主观计划去初始化类变量和其他资源，或者可以从另外一个角度来表达：初始化阶段是执行类构造器<client>()方法的过程。

+ <client>()方法是由编译器自动收集类中的所有类变量的赋值动作和静态语句块中的语句合并产生的
+ 虚拟机会保证在子类的<client>()方法执行之前，父类的<client>()方法已经执行完毕



#### 类加载器

> 通过一个类的全限定名来获取描述此类的二进制字节流

对于任意一个类，都需要由加载它的类加载器和这个类本身一同确立其在Java虚拟机中的唯一性



#### 分派

+ 静态分派：重载，编译阶段
+ 动态分派：重写，运行阶段